@inherits LoginModalBase

@if (Visible)
{
    <div class="modal fade show d-block" tabindex="-1" style="background:rgba(33,33,33,0.18);">
        <div class="modal-dialog modal-dialog-centered" @onclick:stopPropagation>
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header border-0 pb-0">
                    <h5 class="modal-title">Connexion requise</h5>
                    <button type="button" class="btn-close" @onclick="Hide" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <EditForm Model="Model" OnValidSubmit="LoginAsync">
                        <DataAnnotationsValidator />
                        <ValidationSummary />
                        <div class="mb-3">
                            <input class="form-control" placeholder="Email" @bind="Model.Email" autocomplete="username" />
                        </div>
                        <div class="mb-3">
                            <input class="form-control" type="password" placeholder="Mot de passe" @bind="Model.Password" autocomplete="current-password" />
                        </div>
                        @if (!string.IsNullOrEmpty(Error))
                        {
                            <div class="alert alert-danger">@Error</div>
                        }
                        <button class="btn btn-success w-100 d-flex align-items-center justify-content-center" type="submit" disabled="@IsBusy">
                            @if (IsBusy)
                            {
                                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                                <span>Connexion…</span>
                            }
                            else
                            {
                                <span>Se connecter</span>
                            }
                        </button>
                    </EditForm>
                </div>
            </div>
        </div>
    </div>
}
